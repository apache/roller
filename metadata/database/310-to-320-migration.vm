#** 
310-to-320-migration.vm: Velocity template that generates vendor-specific database scripts 

DON'T RUN THIS, IT'S NOT A DATABASE CREATION SCRIPT!!!
**#

-- add new parentid column to weblogcategory table
#addColumnNull("weblogcategory" "parentid" "varchar(48)")
create index ws_parentid_idx on weblogcategory( parentid );

-- add new path column to weblogcategory table
#if($DBTYPE == "MYSQL")
    #addColumnNull("weblogcategory" "path" $TEXT_SQL_TYPE)
#else
    #addColumnNull("weblogcategory" "path" "varchar(1000)")
#end
create index ws_path_idx on weblogcategory( path$!INDEXSIZE );

-- need to add this index for existing folder.parentid
create index fo_parentid_idx on folder( parentid );

-- add new path column to folder table
#if($DBTYPE == "MYSQL")
    #addColumnNull("folder" "path" $TEXT_SQL_TYPE)
#else
    #addColumnNull("folder" "path" "varchar(1000)")
#end
create index fo_path_idx on folder( path$!INDEXSIZE );


-- some various indexes to improve performance
create index rhc_dailyhits_idx on roller_hitcounts( dailyhits );
