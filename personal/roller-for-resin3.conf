<web-app id='/roller' 
	document-directory="C:/sourceforge/roller/build/roller">

	<database>
	   <jndi-name>jdbc/rollerdb</jndi-name>
	   <driver>
		 <type>com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource</type>
		 <url>jdbc:mysql://localhost:3306/roller?autoReconnect=true</url>
		 <user>roller</user>
		 <password>tiger</password>
	   </driver>
	</database>

	<resource jndi-name="mail/Session" type="javax.mail.Session">
		<init mail.transport.protocol='smtp' />
		<init mail.host='localhost' />
		<init mail.user='FranklyIdontGiveaDamn' />
	</resource>

	<!-- Resin-specific JdbcAuthenticator -->
	<authenticator type='com.caucho.server.security.JdbcAuthenticator'>
	  <init>
		<data-source>rollerdb</data-source>
		  <password-query>
			SELECT passphrase FROM rolleruser WHERE username=? and userenabled=1
		  </password-query>
		  <cookie-auth-query>
			SELECT username FROM rolleruser WHERE cookie=?
		  </cookie-auth-query>
		  <cookie-auth-update>
			UPDATE rolleruser SET cookie=? WHERE username=? and userenabled=1
		  </cookie-auth-update>
		  <role-query>
			SELECT rolename FROM userrole r, rolleruser u
			WHERE r.username=? and r.userid = u.id and u.userenabled=1
		  </role-query>
	  </init>
	</authenticator>
		
	<login-config>
		<auth-method>FORM</auth-method>
		<form-login-config>
			<form-login-page>/login.jsp</form-login-page>
			<form-error-page>/loginerror.jsp</form-error-page>
		</form-login-config>
	</login-config>
</web-app>